(this.webpackJsonpforms=this.webpackJsonpforms||[]).push([[0],{138:function(e,t,a){e.exports=a(180)},143:function(e,t,a){},144:function(e,t,a){},165:function(e,t,a){},172:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(14),c=a.n(o),s=(a(143),a(39)),l=(a(144),a(65)),i=a(24),u=a.n(i),m=a(32),p=a(22),d=a(59),f=a.n(d),b=a(33),g=a(247),h=a(122);var v={init:function(){g.a({dsn:"https://ce625a42c479474d86a00952b0109351@o504500.ingest.sentry.io/5591499",autoSessionTracking:!0,integrations:[new h.a.BrowserTracing],tracesSampleRate:1})},log:function(e){console.log(e)}};f.a.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500||(v.log(e),console.log("some other unexp error",e),b.b.error("unexpected error occured")),Promise.reject(e)}));var w={get:f.a.get,post:f.a.post,put:f.a.put,delete:f.a.delete,setJwt:function(e){f.a.defaults.headers.common["x-auth-token"]=e}},E=a(117),j=a(45),O=j.apiUrl+"/auth";function k(){return(k=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.post(O,{email:t.email,password:t.password});case 2:a=e.sent,n=a.data,localStorage.setItem("token",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){return localStorage.getItem("token")}w.setJwt(x());var y={login:function(e){return k.apply(this,arguments)},loginWithJwt:function(e){localStorage.setItem("token",e)},logout:function(){localStorage.removeItem("token")},getCurrentUser:function(){try{var e=localStorage.getItem("token");return Object(E.a)(e)}catch(t){return null}},getJwt:x},C=j.apiUrl+"/users";var N=a(18),S=(a(165),a(181)),I=a(251),U=a(237),P=a(249),T=a(233),_=a(253),B=a(238),W=a(229),A=Object(W.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),D=function(e){var t=A(),a=Object(n.useState)({email:"",name:"",password:"",rePassword:"",selectedTab:0,warning:""}),o=Object(s.a)(a,2),c=o[0],i=o[1],d=r.a.useState(!1),f=Object(s.a)(d,2),g=f[0],h=f[1],v=(j.api_url,function(){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(c.email)?"":"Invalid email"}),E=function(){var t=Object(m.a)(u.a.mark((function t(a){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n="",n=0===c.email.length?"Please enter an email id":v(),0===c.password.length&&(n+="\n Please enter your password"),0===n.length){t.next=7;break}return alert(n),t.abrupt("return");case 7:return t.prev=7,h(!0),t.next=11,y.login(c);case 11:e.updateUser(),t.next=19;break;case 14:return t.prev=14,t.t0=t.catch(7),h(!1),t.t0.response&&400===t.t0.response.status&&b.b.error(t.t0.response.data),t.abrupt("return");case 19:if(0===n.length){t.next=22;break}return alert(n),t.abrupt("return");case 22:h(!1),e.history.push("/customers");case 24:case"end":return t.stop()}}),t,null,[[7,14]])})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(m.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a="",a=0===c.email.length?"Please enter an email id":v(),0===c.password.length?a+="\nPlease enter a password":c.password!==c.rePassword&&(a+="\nPasswords don't match"),0===a.trim().length){t.next=6;break}return alert(a),t.abrupt("return");case 6:return t.prev=6,h(!0),t.next=10,r=c,w.post(C,{email:r.email,password:r.password,name:r.name});case 10:n=t.sent,y.loginWithJwt(n.headers["x-auth-token"]),e.updateUser(),h(!1),e.history.push("/customers"),t.next=22;break;case 17:return t.prev=17,t.t0=t.catch(6),h(!1),t.t0.response&&400===t.t0.response.status&&b.b.error(t.t0.response.data),t.abrupt("return");case 22:0===a.length&&i(Object(p.a)(Object(p.a)({},c),{},{selectedTab:0}));case 23:case"end":return t.stop()}var r}),t,null,[[6,17]])})));return function(){return t.apply(this,arguments)}}(),k=function(e){i(Object(p.a)(Object(p.a)({},c),{},Object(l.a)({},e.target.name,e.target.value)))},x=function(e){var t;i(Object(p.a)(Object(p.a)({},c),{},{selectedTab:e})),t={selectedTab:e},i(Object(p.a)(Object(p.a)({},c),{},{email:"",name:"",password:"",rePassword:"",warning:""},t))};return y.getCurrentUser()?r.a.createElement(N.a,{to:"/customers"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement("div",{className:"crmHome-main"},r.a.createElement("div",{className:"crmHome-title"},"Best CRM App"),r.a.createElement(S.a,{className:"paperForm"},r.a.createElement(P.a,{value:c.selectedTab,onChange:function(e,t){return x(t)},"aria-label":"simple tabs example"},r.a.createElement(T.a,{label:"LOGIN"}),r.a.createElement(T.a,{label:"SIGN UP"})),r.a.createElement("div",{className:"loginView tabView",hidden:1===c.selectedTab},r.a.createElement(I.a,{name:"email",id:"logIn-email",label:"email",variant:"outlined",onChange:k,value:c.email}),r.a.createElement(I.a,{name:"password",id:"logIn-password",label:"password",variant:"outlined",type:"password",onChange:k,value:c.password}),r.a.createElement(U.a,{color:"primary",variant:"contained",onClick:function(e){return E(e)}},"log in")),r.a.createElement("div",{className:"signupView tabView",hidden:0===c.selectedTab},r.a.createElement(I.a,{name:"name",id:"signup-name",label:"name",variant:"outlined",onChange:k,value:c.name}),r.a.createElement(I.a,{name:"email",id:"signUp-email",label:"email",variant:"outlined",onChange:k,value:c.email}),r.a.createElement(I.a,{name:"password",id:"signUp-password",label:"password",variant:"outlined",type:"password",onChange:k,value:c.password}),r.a.createElement(I.a,{name:"rePassword",id:"signUp-rePassword",label:"password",variant:"outlined",type:"password",onChange:k,value:c.rePassword}),r.a.createElement(U.a,{color:"primary",variant:"contained",onClick:function(){return O()}},"Sign Up")))),r.a.createElement(_.a,{className:t.backdrop,open:g},r.a.createElement(B.a,{color:"inherit"})))},J=a(123),z=function(e){e.path;var t=e.component,a=e.render,n=Object(J.a)(e,["path","component","render"]);return r.a.createElement(N.b,Object.assign({exact:!0},n,{render:function(e){return y.getCurrentUser()?t?r.a.createElement(t,e):a(e):r.a.createElement(N.a,{to:{pathname:"/",state:{from:e.location}}})}}))},R=a(75),L=(a(172),a(248)),V=a(254),F=a(240),G=a(244),H=a(243),M=a(239),$=a(241),K=a(242),X=a(121),Z=a.n(X),q=Object(W.a)({table:{minWidth:650}});function Q(e){var t=e.tableData,a=e.deleteCustomerId,n=q();return r.a.createElement(M.a,{component:S.a},r.a.createElement(F.a,{className:n.table,"aria-label":"simple table"},r.a.createElement($.a,null,r.a.createElement(K.a,null,r.a.createElement(H.a,null,"Customer ID"),r.a.createElement(H.a,{align:"right"},"Name"),r.a.createElement(H.a,{align:"right"},"Gender"),r.a.createElement(H.a,{align:"right"},"Contact No"),r.a.createElement(H.a,{align:"right"},"Remove?"))),r.a.createElement(G.a,null,t.map((function(e,t){return r.a.createElement(K.a,{key:e.name},r.a.createElement(H.a,{component:"th",scope:"row"},e._id),r.a.createElement(H.a,{align:"right"},e.name),r.a.createElement(H.a,{align:"right"},e.gender),r.a.createElement(H.a,{align:"right"},e.contact),r.a.createElement(H.a,{align:"right"},e.deleting?r.a.createElement("div",null,r.a.createElement(B.a,{color:"secondary"})):r.a.createElement(U.a,{variant:"contained",color:"secondary",className:"deleteBtn",startIcon:r.a.createElement(Z.a,null),onClick:function(){a(e._id,t)}})))})))))}var Y=a(252),ee=a(250),te=j.apiUrl+"/customers";function ae(e){return w.delete((t=e,"".concat(te,"/").concat(t)));var t}var ne=a(177),re=Object(W.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),oe=function(e){var t=re(),a=Object(n.useState)({name:"",gender:"male",contact:"",fetchedData:"",openSnackBar:!1,lastDeletedCustomer:{},showUndoIndicator:!1}),o=Object(s.a)(a,2),c=o[0],i=o[1],d=Object(n.useState)([]),f=Object(s.a)(d,2),g=f[0],h=f[1],v=r.a.useState(!1),E=Object(s.a)(v,2),j=E[0],O=E[1],k=Object(n.useState)([!1,!1]),x=Object(s.a)(k,2),y=x[0],C=x[1],N=function(e,t){"clickaway"!==t&&i(Object(p.a)(Object(p.a)({},c),{},{openSnackBar:!1}))},P=function(e){var t=Object(R.a)(g),a=t.findIndex((function(t){return t._id===e}));t[a].deleting=!0,h(t)},T=function(e){var t=Object(R.a)(g),a=t.findIndex((function(t){return t._id===e}));delete t[a].deleting,h(t)},W=function(){var e=Object(m.a)(u.a.mark((function e(t,a){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(t),e.prev=1,e.next=4,ae(t);case 4:e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),T(t),(e.t0.response&&400===e.t0.response.status||404===e.t0.response.status)&&b.b.error(e.t0.response.data),e.abrupt("return");case 12:n=Object(R.a)(g.filter((function(e){return e._id!==t}))),h(n),console.log("new table data list after delting customer is ",n),i(Object(p.a)(Object(p.a)({},c),{},{openSnackBar:!0}));case 16:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a){return e.apply(this,arguments)}}(),A=function(){var e=[!1,!1],t=[];return 0===c.name.length&&(t.push("Customer Name can't be empty"),e[0]=!0),0===c.contact.length&&(t.push("Contact number can't be empty"),e[1]=!0),isNaN(c.contact)&&(t.push("Please enter valid mob number"),e[1]=!0),10!=="".concat(parseInt(c.contact)).length&&(t.push("Contact Number needs to be of 10 digit"),e[1]=!0),t.length>0&&alert(t.join("\n")),C(e),0===t.length},D=function(e){i(Object(p.a)(Object(p.a)({},c),{},Object(l.a)({},e.target.name,e.target.value)))},J=function(){var e=Object(m.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A()){e.next=3;break}return console.log("input not valid"),e.abrupt("return",0);case 3:return i(Object(p.a)(Object(p.a)({},c),{},{fetchedData:null})),e.prev=4,O(!0),e.next=8,n=ne.pick(c,["name","contact","gender"]),w.post(te,n);case 8:t=e.sent,O(!1),e.next=17;break;case 12:return e.prev=12,e.t0=e.catch(4),O(!1),e.t0.response&&400===e.t0.response.status&&b.b.error(e.t0.response.data),e.abrupt("return");case 17:i(Object(p.a)(Object(p.a)({},c),{},{customerName:"",gender:"male",mobNo:"",fetchedData:""})),h([].concat(Object(R.a)(g),[(a=t.data,{_id:a._id,name:a.name,gender:a.gender,contact:a.contact})]));case 19:case"end":return e.stop()}var a,n}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=Object(m.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,O(!0),e.next=4,w.get(te);case 4:t=e.sent,O(!1),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(0),O(!1),e.t0.response&&400===e.t0.response.status&&b.b.error(e.t0.response.data+", please refresh page"),e.abrupt("return");case 13:a=t.data,h(a);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){z()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,null),r.a.createElement("div",null,r.a.createElement(S.a,{className:"paper"},r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(I.a,{name:"name",id:"customerName",label:"Customer Name",variant:"outlined",onChange:D,value:c.name,error:y[0]})),r.a.createElement("div",null,r.a.createElement(I.a,{name:"contact",id:"mobNo",label:"Contact No.",variant:"outlined",onChange:D,value:c.contact,error:y[1]})),r.a.createElement("div",null,r.a.createElement(L.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"gender",value:c.gender,onChange:D,color:"secondary"},["male","female","others","prefer not to say"].map((function(e){return r.a.createElement(V.a,{key:e+"optionsKey",value:e},e)}))))),r.a.createElement(U.a,{color:"primary",variant:"contained",onClick:function(){return J()}},"Save info")),0!==g.length?r.a.createElement(Q,{className:"simpleTable",tableData:g,deleteCustomerId:function(e,t){return W(e,t)}}):"",r.a.createElement(Y.a,{open:c.openSnackBar,autoHideDuration:3e3,onClose:N},r.a.createElement(ee.a,{onClose:N,severity:"success"},"Customer Deleted!"))),r.a.createElement(_.a,{className:t.backdrop,open:j},r.a.createElement(B.a,{color:"inherit"})))};a(179);function ce(){return Object(n.useEffect)((function(){localStorage.removeItem("token")}),[]),null}var se=a(245),le=a(246),ie=function(e){var t=Object(N.g)();function a(){return(a=Object(m.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:y.logout(),e.updateUser(),t.push("/");case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}return r.a.createElement(se.a,{position:"static",className:"topAppBar"},r.a.createElement(le.a,{className:"appBar-toolBar"},e.user?r.a.createElement(U.a,{color:"inherit",onClick:function(){return a.apply(this,arguments)}},"Logout"):""))};var ue=function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),o=a[0],c=a[1],l=function(){var e=y.getCurrentUser();c(e)};return Object(n.useEffect)((function(){l()}),[]),r.a.createElement("div",{className:"App"},r.a.createElement(ie,{user:o,updateUser:l}),r.a.createElement("header",{className:"App-header"},r.a.createElement(N.d,null,r.a.createElement(z,{exact:!0,path:"/customers",component:oe}),r.a.createElement(N.b,{path:"/",render:function(e){return r.a.createElement(D,Object.assign({},e,{updateUser:l}))}}),r.a.createElement(N.b,{path:"/logout",component:ce}))))},me=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function pe(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var de=a(62);v.init(),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de.a,null,r.a.createElement(ue,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/crm_front_end",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/crm_front_end","/service-worker.js");me?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):pe(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):pe(t,e)}))}}()},45:function(e){e.exports=JSON.parse('{"db":"mongodb+srv://crmAdmin:VrTaLMXxUusN74mZ@cluster0.m8s54.mongodb.net/<dbname>?retryWrites=true&w=majority","api_url":"https://u39h9e73d2.execute-api.us-east-1.amazonaws.com/production/api","apiUrl":"https://u39h9e73d2.execute-api.us-east-1.amazonaws.com/production/api"}')}},[[138,1,2]]]);
//# sourceMappingURL=main.0b309859.chunk.js.map