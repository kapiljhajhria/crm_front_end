(this.webpackJsonpforms=this.webpackJsonpforms||[]).push([[0],{72:function(e,t,a){e.exports=a(86)},77:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),s=a.n(o),c=(a(77),a(78),a(52)),l=a(14),i=a.n(l),u=a(27),m=a(53),d=a(54),h=a(61),p=a(62),f=(a(80),a(138)),g=a(137),b=a(141),v=a(146),D=a(143),E=a(126),C=a(132),I=a(136),w=a(135),N=a(129),k=a(133),S=a(134),y=a(131),x=a(59),B=a.n(x),L=Object(E.a)({table:{minWidth:650}});function j(e){var t=L();return r.a.createElement(N.a,{component:y.a},r.a.createElement(C.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(k.a,null,r.a.createElement(S.a,null,r.a.createElement(w.a,null,"Customer ID"),r.a.createElement(w.a,{align:"right"},"Name"),r.a.createElement(w.a,{align:"right"},"Gender"),r.a.createElement(w.a,{align:"right"},"Contact No"),r.a.createElement(w.a,{align:"right"},"Remove?"))),r.a.createElement(I.a,null,e.tableData.map((function(t){return r.a.createElement(S.a,{key:t.name},r.a.createElement(w.a,{component:"th",scope:"row"},t.customerID),r.a.createElement(w.a,{align:"right"},t.name),r.a.createElement(w.a,{align:"right"},t.gender),r.a.createElement(w.a,{align:"right"},t.contact),r.a.createElement(w.a,{align:"right"},e.deletingCustList.includes(t.customerID)?r.a.createElement("div",null,r.a.createElement(g.a,{color:"secondary"})):r.a.createElement(f.a,{variant:"contained",color:"secondary",className:"deleteBtn",startIcon:r.a.createElement(B.a,null),onClick:function(){e.deleteCustomerId(t.customerID)}})))})))))}var O=a(145),M=a(142),P=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={customerName:"",gender:"Male",mobNo:"",fetchedData:"",tableData:[],deletingCustList:[],openSnackBar:!1,lastDeletedCustomer:[],showUndoIndicator:!1},n.errorBoolsList=[!1,!1],n.setErrorsList=function(e){console.log("errorList is:"+e),n.errorBoolsList=[].concat(e)},n.showSnackBar=function(){n.setState({openSnackBar:!0})},n.closeSnackBar=function(e,t){"clickaway"!==t&&n.setState({openSnackBar:!1})},n.createData=function(e,t,a,n){return{customerID:e,name:t,gender:a,contact:n}},n.deleteCustomerId=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({deletingCustList:n.state.deletingCustList.concat(t)}),console.log("deleting custID:"+t),a=n.state.tableData.findIndex((function(e){return e.customerID===t})),e.next=5,n.makePostRequest("http://localhost:5000/deleteCustomer",{customerID:t,index:a});case 5:e.sent,r=n.state.tableData[a],console.log("deleting custID from network, now updating local variables:"+t),n.setState({lastDeletedCustomer:r,tableData:n.state.tableData.filter((function(e){return e.customerID!=t})),deletingCustList:n.state.deletingCustList.filter((function(e){return e!==t}))}),console.log("main list, deleting id list and last cust deleting list updated using setState, showing snackbar now"+t),n.showSnackBar();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.validateData=function(){var e=[!1,!1],t=[];return 0===n.state.customerName.length&&(t.push("Customer Name can't be empty"),e[0]=!0),0===n.state.mobNo.length&&(t.push("Contact number can't be empty"),e[1]=!0),isNaN(n.state.mobNo)&&(t.push("Please enter valid mob number"),e[1]=!0),10!=="".concat(parseInt(n.state.mobNo)).length&&(t.push("Contact Number needs to be of 10 digit"),e[1]=!0),t.length>0&&alert(t.join("\n")),n.setErrorsList(e),n.setState(),0===t.length},n.handleInputChange=function(e){n.setState(Object(c.a)({},e.target.name,e.target.value))},n.genderList=["Male","Female","Rather Not Say","Others"],n.undoDelete=Object(u.a)(i.a.mark((function e(){var t,a,r,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.closeSnackBar(),n.setState({showUndoIndicator:!0}),(t=new Map).customerID=n.state.lastDeletedCustomer.customerID,e.next=6,n.makePostRequest("http://localhost:5000/undoDelete",t);case 6:return a=e.sent,console.log("res from undo"+JSON.stringify(a)),r=[].concat(n.state.tableData),o=(o=[].concat(n.state.deletingCustList)).filter((function(e){return a.deletedCustomer.customerID!==e})),n.setState({custIdBeingDeleted:o}),e.next=14,n.updateTableData(r,a.deletedCustomer,a.deletedCustomerIndex);case 14:n.setState({showUndoIndicator:!1});case 15:case"end":return e.stop()}}),e)}))),n.updateTableData=function(){var e=Object(u.a)(i.a.mark((function e(t,a,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("position in new function is:"+r),void 0===r?t.push(a):t.splice(r,0,a),n.setState({tableData:t,lastDeletedCustomer:[]});case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.getCustomerId=Object(u.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.validateData()){e.next=3;break}return n.setState({},(function(){return n.errorBoolsList})),e.abrupt("return",0);case 3:return n.setState({fetchedData:null}),(t=new Map).name=n.state.customerName,t.gender=n.state.gender,t.contact=n.state.mobNo,e.next=10,n.makePostRequest("http://localhost:5000/",t);case 10:return a=e.sent,n.setState({fetchedData:a.customerID}),console.log(n.state),console.log("fetched CustomerID is: "+a.customerID),r=[].concat(n.state.tableData),e.next=17,n.updateTableData(r,n.createData(a.customerID,n.state.customerName,n.state.gender,n.state.mobNo));case 17:n.setState({customerName:"",gender:"Male",mobNo:"",fetchedData:""},(function(){return n.errorBoolsList}));case 18:case"end":return e.stop()}}),e)}))),n.makePostRequest=function(){var e=Object(u.a)(i.a.mark((function e(t,a){var n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),n.fetchFormData=Object(u.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:5000/customers");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,n.setState({tableData:null!==a&&void 0!==a?a:[]});case 7:case"end":return e.stop()}}),e)}))),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){console.log("mounted"),this.fetchFormData(),console.log("data from local storage")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,{className:"paper"},r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(D.a,{name:"customerName",id:"customerName",label:"Customer Name",variant:"outlined",onChange:this.handleInputChange,value:this.state.customerName,error:this.errorBoolsList[0]})),r.a.createElement("div",null,r.a.createElement(D.a,{name:"mobNo",id:"mobNo",label:"Contact No.",variant:"outlined",onChange:this.handleInputChange,value:this.state.mobNo,error:this.errorBoolsList[1]})),r.a.createElement("div",null,r.a.createElement(b.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"gender",value:this.state.gender,onChange:this.handleInputChange,color:"secondary"},this.genderList.map((function(e){return r.a.createElement(v.a,{value:e},e)}))))),null===this.state.fetchedData?r.a.createElement("div",null,r.a.createElement(g.a,{color:"secondary"})):r.a.createElement("div",null,r.a.createElement(f.a,{color:"primary",variant:"contained",onClick:function(){return e.getCustomerId()}},"Save info"),this.state.showUndoIndicator?r.a.createElement("div",null,r.a.createElement(g.a,{color:"secondary"})):"")),0!==this.state.tableData.length?r.a.createElement(j,{className:"simpleTable",tableData:this.state.tableData,deletingCustList:this.state.deletingCustList,deleteCustomerId:function(t){return e.deleteCustomerId(t)}}):"",r.a.createElement(O.a,{open:this.state.openSnackBar,autoHideDuration:3e3,onClose:this.closeSnackBar},r.a.createElement(M.a,{onClose:this.closeSnackBar,severity:"success",action:r.a.createElement(f.a,{color:"inherit",size:"small",onClick:this.undoDelete},"Undo")},"Customer Deleted!")))}}]),a}(r.a.Component);var R=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(P,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.c1fa71f5.chunk.js.map