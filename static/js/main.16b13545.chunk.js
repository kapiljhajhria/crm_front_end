(this.webpackJsonpforms=this.webpackJsonpforms||[]).push([[0],{72:function(e,t,a){e.exports=a(86)},77:function(e,t,a){},78:function(e,t,a){},80:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),l=(a(77),a(78),a(52)),s=a(17),i=a.n(s),u=a(36),m=a(53),d=a(54),h=a(61),g=a(62),p=(a(80),a(138)),f=a(137),D=a(141),v=a(146),E=a(143),b=a(126),I=a(132),S=a(136),y=a(135),k=a(129),C=a(133),N=a(134),w=a(131),B=a(59),O=a.n(B),j=Object(b.a)({table:{minWidth:650}});function x(e){var t=j();return r.a.createElement(k.a,{component:w.a},r.a.createElement(I.a,{className:t.table,"aria-label":"simple table"},r.a.createElement(C.a,null,r.a.createElement(N.a,null,r.a.createElement(y.a,null,"Customer ID"),r.a.createElement(y.a,{align:"right"},"Name"),r.a.createElement(y.a,{align:"right"},"Gender"),r.a.createElement(y.a,{align:"right"},"Contact No"),r.a.createElement(y.a,{align:"right"},"Remove?"))),r.a.createElement(S.a,null,e.tableData.map((function(t){return r.a.createElement(N.a,{key:t.name},r.a.createElement(y.a,{component:"th",scope:"row"},t.custId),r.a.createElement(y.a,{align:"right"},t.name),r.a.createElement(y.a,{align:"right"},t.gender),r.a.createElement(y.a,{align:"right"},t.contact),r.a.createElement(y.a,{align:"right"},e.custIdBeingDeleted.includes(t.custId)?r.a.createElement("div",null,r.a.createElement(f.a,{color:"secondary"})):r.a.createElement(p.a,{variant:"contained",color:"secondary",className:"deleteBtn",startIcon:r.a.createElement(O.a,null),onClick:function(){e.deleteCustomerId(t.custId)}})))})))))}var J=a(145),M=a(142),T=function(e){Object(g.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={customerName:"",gender:"Male",mobNo:"",fetchedData:"",tableData:[],custIdBeingDeleted:[],openSnackBar:!1,lastDeletedCustomer:[]},n.showSnackBar=function(){n.setState({openSnackBar:!0})},n.closeSnackBar=function(e,t){"clickaway"!==t&&n.setState({openSnackBar:!1})},n.createData=function(e,t,a,n){return{custId:e,name:t,gender:a,contact:n}},n.deleteCustomerId=function(){var e=Object(u.a)(i.a.mark((function e(t){var a,r,o,c,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=JSON.parse(JSON.stringify(n.state.custIdBeingDeleted))).push(t),n.setState({custIdBeingDeleted:a}),console.log("deleting stuff id:"+t),e.next=6,fetch("https://cors-anywhere.herokuapp.com/http://slowwly.robertomurray.co.uk/delay/3000/url/http://www.google.co.uk ");case 6:r=[].concat(n.state.tableData),o=r.findIndex((function(e){return e.custId===t})),console.log("found index:"+o),c=[(c=r.splice(o,1))[0],o],n.setState({lastDeletedCustomer:c}),localStorage.setItem("myData",JSON.stringify(r)),l=JSON.parse(localStorage.getItem("myData")),n.setState({tableData:null!==l&&void 0!==l?l:[]}),n.showSnackBar();case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleInputChange=function(e){n.setState(Object(l.a)({},e.target.name,e.target.value))},n.genderList=["Male","Female","Rather Not Say","Others"],n.undoDelete=Object(u.a)(i.a.mark((function e(){var t,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.closeSnackBar(),t=n.state.lastDeletedCustomer,a=[].concat(n.state.tableData),r=(r=[].concat(n.state.custIdBeingDeleted)).filter((function(e){return t[0].custId!==e})),n.setState({custIdBeingDeleted:r}),e.next=8,n.updateTableData(a,t[0],t[1]);case 8:case"end":return e.stop()}}),e)}))),n.updateTableData=function(){var e=Object(u.a)(i.a.mark((function e(t,a,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("position in new function is:"+r),void 0===r?t.push(a):t.splice(r,0,a),n.setState({tableData:t,lastDeletedCustomer:[]}),localStorage.setItem("myData",JSON.stringify(t));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.getCustomerId=Object(u.a)(i.a.mark((function e(){var t,a,r,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({fetchedData:null}),t=new FormData,a=n.state,t.append("myjsonkey",JSON.stringify(a)),e.next=6,fetch("https://cors-anywhere.herokuapp.com/https://us-central1-form-manager-7234f.cloudfunctions.net/saveCustomer",{method:"POST",headers:t});case 6:return r=e.sent,e.next=9,r.json();case 9:return o=e.sent,n.setState({fetchedData:o.customerID}),console.log(n.state),console.log("fetched CustomerID is: "+o.customerID),c=[].concat(n.state.tableData),e.next=16,n.updateTableData(c,n.createData(o.customerID,n.state.customerName,n.state.gender,n.state.mobNo));case 16:n.setState({customerName:"",gender:"Male",mobNo:"",fetchedData:""});case 17:case"end":return e.stop()}}),e)}))),n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("myData"));this.setState({tableData:null!==e&&void 0!==e?e:[]}),console.log(localStorage.getItem("myData")),console.log("data from local storage")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(w.a,{className:"paper"},r.a.createElement("form",null,r.a.createElement("div",null,r.a.createElement(E.a,{name:"customerName",id:"customerName",label:"Customer Name",variant:"outlined",onChange:this.handleInputChange,value:this.state.customerName})),r.a.createElement("div",null,r.a.createElement(E.a,{name:"mobNo",id:"mobNo",label:"Contact No.",variant:"outlined",onChange:this.handleInputChange,value:this.state.mobNo})),r.a.createElement("div",null,r.a.createElement(D.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",name:"gender",value:this.state.gender,onChange:this.handleInputChange,color:"secondary"},this.genderList.map((function(e){return r.a.createElement(v.a,{value:e},e)}))))),null===this.state.fetchedData?r.a.createElement("div",null,r.a.createElement(f.a,{color:"secondary"})):r.a.createElement(p.a,{color:"primary",variant:"contained",onClick:function(){return e.getCustomerId()}},"Save info")),r.a.createElement(x,{className:"simpleTable",tableData:this.state.tableData,custIdBeingDeleted:this.state.custIdBeingDeleted,deleteCustomerId:function(t){return e.deleteCustomerId(t)}}),r.a.createElement(J.a,{open:this.state.openSnackBar,autoHideDuration:3e3,onClose:this.closeSnackBar},r.a.createElement(M.a,{onClose:this.closeSnackBar,severity:"success",action:r.a.createElement(p.a,{color:"inherit",size:"small",onClick:this.undoDelete},"Undo")},"Customer Deleted!")))}}]),a}(r.a.Component);var W=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(T,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(W,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.16b13545.chunk.js.map